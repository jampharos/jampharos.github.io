<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" type="text/css" href="style.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1" /> 
  </head>
  <body>
    <main>
      <div class="myButtons">
        <h1></h1>
        <button id="encounterSuccess" onclick="addESuccess()">
          Found Nidoran
        </button>
        <button id="catchSuccess" onclick="addCSuccess()">
          Caught Nidoran
        </button>
        <button id="fail" onclick="fail()">Failed</button>
      </div>
      <ul>
        <li id="attempts">Attempts:</li>
        <li id="encSuccess">Found Nidoran:</li>
        <li id="caSuccess">Caught Nidoran:</li>
        <li id="currentStreak">Current streak:</li>
        <li id="maxStreak">Max streak:</li>
      </ul>

      <div class="myButtons">
        <form
          action="https://www.youtube.com/watch?v=6iOx592-xhU"
          target="_blank"
        >
          <button>Video</button>
        </form>
        <br>
        <button onclick="reset()">Reset</button>
      </div>
      <img src="sprite.png" />
    </main>
  </body>
  <script>
    var encounterSuccess = 0;
    var encounterSuccessRate = 0;
    var catchSuccess = 0;
    var catchSuccessRate = 0;
    var attempts = 0;
    var catchLoss = 0;
    var streak = 0;
    var maxStreak = 0;
    var newStreak = false;
    var newStreakMessage = document.createTextNode(" New streak! Good job!");

    function reset() {
        encounterSuccess = 0;
        encounterSuccessRate = 0;
        catchSuccess = 0;
        catchSuccessRate = 0;
        attempts = 0;
        catchLoss = 0;
        streak = 0;
        maxStreak = 0;
        newStreak = false;
        document.getElementById("attempts").innerHTML = "Attempts:";
        document.getElementById("encSuccess").innerHTML = "Found Nidoran:";
        document.getElementById("caSuccess").innerHTML = "Caught Nidoran:";
        document.getElementById("currentStreak").innerHTML = "Current streak:";
        document.getElementById("maxStreak").innerHTML = "Max streak:";
    }

    function addESuccess() {
      ++encounterSuccess;
      ++catchLoss;
      ++streak;
      ++attempts;
      updateScores();
    }

    function addCSuccess() {
      ++encounterSuccess;
      ++catchSuccess;
      ++streak;
      ++attempts;
      updateScores();
    }

    function fail() {
      streak = 0;
      ++attempts;
      updateScores();
    }

    function updateScores() {
      if (streak > maxStreak) {
        maxStreak = streak;
        newStreak = true;
      } else {
        newStreak = false;
      }
      encounterSuccessRate = parseInt((encounterSuccess / attempts) * 100);
      catchSuccessRate = parseInt((catchSuccess / attempts) * 100);
      document.getElementById("attempts").innerHTML = "Attempts: " + attempts;
      document.getElementById("encSuccess").innerHTML =
        "Found Nidoran: " +
        encounterSuccess +
        " (" +
        encounterSuccessRate +
        "%)";
      document.getElementById("caSuccess").innerHTML =
        "Caught Nidoran: " + catchSuccess + " (" + catchSuccessRate + "%)";
      document.getElementById("currentStreak").innerHTML =
        "Current (encounter) streak: " + streak;
      document.getElementById("maxStreak").innerHTML =
        "Max streak: " + maxStreak;
      if (newStreak == true) {
        document.getElementById("maxStreak").appendChild(newStreakMessage);
      }
    }
  </script>
</html>
